<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="style2.css" />
  <title>Mars Recycler</title>
</head>
<body>
  <div id="container"></div>

  <header>
    <div class="nav">
      <div class="logo">
        <a href="#project-hero" aria-label="Mars Recycler Home" style="display:flex;align-items:center;gap:.5rem;text-decoration:none;color:inherit;">
          <svg width="32" height="32" viewBox="0 0 64 64" role="img" aria-label="Mars planet logo" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <radialGradient id="marsGrad" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="#f2a57e"/>
                <stop offset="60%" stop-color="#c36a4a"/>
                <stop offset="100%" stop-color="#8b3b2e"/>
              </radialGradient>
            </defs>
            <circle cx="32" cy="32" r="30" fill="url(#marsGrad)"/>
            <path d="M8 28c8-6 20-8 32-4M10 40c10-4 18-2 28 2M22 18c6 2 10 4 18 6" stroke="#7a2f25" stroke-width="3" stroke-linecap="round" opacity=".5" fill="none"/>
            <circle cx="46" cy="18" r="3" fill="#e8cbaa" opacity=".8"/>
          </svg>
          <span>Mars Recycler</span>
        </a>
      </div>
      <nav class="links">
        <a href="#project-hero">Home</a>
        <a href="#Workflow">Workflow</a>
        <a href="#gallery">Models</a>
        <a href="#architecture">Architecture</a>
      </nav>
      <a href=""></a>
    </div>
  </header>

  <!-- HERO -->
  <section id="project-hero" class="content-section">
    <div class="content-inner">
      <div class="text-content">
        <div class="left-hero">
          <div id="mars-canvas" class="mars-canvas" aria-hidden="false"></div>
          <div class="hero-overlay">
            <a class="nasa-badge" href="https://www.spaceappschallenge.org/" target="_blank" rel="noopener" aria-label="NASA Space Apps" style="display:flex;align-items:center;gap:.5rem;text-decoration:none;color:inherit;">
              <img width="48" height="48" src="https://img.icons8.com/color/48/nasa.png" alt="NASA"/>
              <span>NASA Space Apps</span>
            </a>
            <h1 class="title">Mars</h1>
            <h2 class="subtitle" style="color:#9C2E35;">Recycler</h2>
            <p class="description" style="color:#ffffff;">
              Revolutionary modular recycling system for sustainable Mars exploration. Converting space waste into valuable resources through advanced pyrolysis and reformation technology.
            </p>
            <a href="#system" class="cta-danger" role="button" aria-label="Explore System">
              Explore System <span class="arrow" aria-hidden="true">‚Üí</span>
            </a>
          </div>
        </div>
      </div>
      <div class="video-content" aria-label="YouTube video ">
        <iframe width="460" height="300" src="https://www.youtube.com/watch?v=n2dVFdqMYGA&list=RDn2dVFdqMYGA&start_radio=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
      </div>
    </div>
  </section>

  <section id="Workflow" class="section">
    <div class="wrap">
      <h2 class="title">Workflow</h2>
      <p class="subtitle">Processing flow and energy storage pipeline</p>
      <div class="architecture">
        <div class="flowchart-container">
          <img src="textures/Flowchart.png" alt="Waste2Watt Flowchart"/>
        </div>
      </div>
    </div>
  </section>

  <section id="gallery" class="section" style="background:#151515">
    <div class="wrap">
      <h2 class="title" style="color:var(--mars-orange)">Models</h2>
      <p class="subtitle">Caption or details</p>
      <div class="gallery">
        <div class="card">
          <div class="card-img">Image</div>
          <div class="card-body">
            <h4>model name</h4>
            <p>description</p>
          </div>
        </div>
        <div class="card">
          <div class="card-img">Diagram</div>
          <div class="card-body">
            <h4>System Flowchart</h4>
            <p>diagram</p>
          </div>
        </div>
        <div class="card">
          <div class="card-img">image</div>
          <div class="card-body">
            <h4>name</h4>
            <p>detail.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="system" class="section">
    <div class="wrap">
      <h2 class="title">Subsystem Specifications</h2>
      <p class="subtitle">Detailed breakdown of modules and features</p>
      <div class="specs">
        <div class="spec"><h4>Intake & Shredder</h4><p>details</p></div>
        <div class="spec"><h4>Intelligent Sorting</h4><p>details</p></div>
        <div class="spec"><h4>Pyrolysis</h4><p>details</p></div>
        <div class="spec"><h4>Reforming</h4><p>details</p></div>
        <div class="spec"><h4>Cleanup</h4><p>details</p></div>
        <div class="spec"><h4>Condenser</h4><p>details</p></div>
        <div class="spec"><h4>SOFC Power</h4><p>details</p></div>
        <div class="spec"><h4>Power Management</h4><p>details</p></div>
      </div>
    </div>
  </section>

<section id="workflow" class="section">
    <div class="wrap">
        <h2 class="title">‚ôªÔ∏è Workflow</h2>
        <div id="workflow-steps"></div>
    </div>
</section>

<section id="architecture" class="section">
    <div class="wrap">
        <h2 class="title">‚ö° Process Waste</h2>
        <div>
            <select id="waste-type">
                <option value="organic">Organic</option>
                <option value="plastic">Plastic</option>
                <option value="metal">Metal</option>
                <option value="e-waste">E-Waste</option>
            </select>
            <input type="number" id="waste-weight" placeholder="Weight (kg)"/>
            <button onclick="simulateProcess()">Process Waste</button>
        </div>
        <div id="process-result" class="data-box"></div>
    </div>
</section>

<section id="waste-types" class="section">
    <div class="wrap">
        <h2 class="title">üóëÔ∏è Waste Types</h2>
        <div id="waste-list"></div>
    </div>
</section>

<section id="mars-data" class="section">
    <div class="wrap">
        <h2 class="title">üåå Mars Data</h2>
        <div id="mars-weather" class="data-box">Loading weather...</div>
        <div id="mars-photos" class="data-box">Loading photos...</div>
    </div>
</section>

  <footer>
    <div class="foot-wrap"></div>
    <div class="copyright">¬© 2025 Mars Recycler Project. All rights reserved.</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/three@0.152.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.0/examples/js/controls/OrbitControls.js"></script>
  <script src="script.js"></script>

  <script>
    const API_URL = "http://localhost:5000";
    (function () {
      const container = document.getElementById("workflow-steps");
      if (!container) return;
      fetch(`${API_URL}/api/workflow`)
        .then((r) => r.json())
        .then((data) => {
          container.innerHTML = "";
          (data.steps || []).forEach((step) => {
            const div = document.createElement("div");
            div.className = "data-box";
            div.textContent = step;
            container.appendChild(div);
          });
        })
        .catch(() => {
          container.textContent = "Failed to load workflow.";
        });
    })();

    (function () {
      const container = document.getElementById("waste-list");
      if (!container) return;
      fetch(`${API_URL}/api/waste-types`)
        .then((r) => r.json())
        .then((data) => {
          container.innerHTML = "";
          (data || []).forEach((waste) => {
            const div = document.createElement("div");
            div.className = "data-box";
            const eff = waste.efficiency != null ? (waste.efficiency * 100).toFixed(0) + "%" : "N/A";
            const byp = Array.isArray(waste.byproducts) ? waste.byproducts.join(", ") : "N/A";
            div.innerHTML = `<b>${String(waste.type || "").toUpperCase()}</b><br>Efficiency: ${eff}<br>Byproducts: ${byp}`;
            container.appendChild(div);
          });
        })
        .catch(() => {
          container.textContent = "Failed to load waste types.";
        });
    })();
    function simulateProcess() {
      const typeEl = document.getElementById("waste-type");
      const weightEl = document.getElementById("waste-weight");
      const resultEl = document.getElementById("process-result");
      if (!typeEl || !weightEl || !resultEl) return;

      const type = typeEl.value;
      const weight = parseFloat(weightEl.value);
      if (!isFinite(weight) || weight <= 0) {
        resultEl.textContent = "Enter a valid weight.";
        return;
      }

      fetch(`${API_URL}/api/process`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ type, weight }),
      })
        .then((r) => r.json())
        .then((res) => {
          if (res.error) {
            resultEl.textContent = res.error;
            return;
          }
          const byp = Array.isArray(res.byproducts) ? res.byproducts.join(", ") : "N/A";
          resultEl.innerHTML =
            `<b>Processed ${res.input_weight} kg of ${res.type} waste</b><br>
             Energy Generated: ‚ö° ${res.energy_kwh} kWh<br>
             Byproducts: ${byp}`;
        })
        .catch(() => {
          resultEl.textContent = "Processing failed.";
        });
    }

    (function () {
      const box = document.getElementById("mars-weather");
      if (!box) return;
      fetch(`${API_URL}/api/mars-weather`)
        .then((r) => r.json())
        .then((res) => {
          if (!res.available) {
            box.innerHTML = `Weather Unavailable<br><small>${res.note || "No data returned."}</small>`;
            return;
          }
          box.innerHTML =
            `<b>Sol ${res.sol ?? "N/A"}</b><br>
             Date: ${res.date ? new Date(res.date).toDateString() : "N/A"}<br>
             Temperature: ${res.temp != null ? res.temp + " ¬∞C" : "N/A"}<br>
             Wind: ${res.wind != null ? res.wind + " m/s" : "N/A"}<br>
             Pressure: ${res.pressure != null ? res.pressure + " Pa" : "N/A"}<br>
             <small>Source: ${res.source || "NASA"}</small>`;
        })
        .catch(() => {
          box.textContent = "Failed to load Mars weather.";
        });
    })();

    (function () {
      const container = document.getElementById("mars-photos");
      if (!container) return;

      container.textContent = "Loading photos...";

      fetch(`${API_URL}/api/mars-photos`)
        .then((r) => r.json())
        .then((res) => {
          const photos = Array.isArray(res.photos) ? res.photos : [];
          container.innerHTML = "";

          if (photos.length === 0) {
            container.innerHTML = `No photos available.<br><small>${res.note || ""}</small>`;
            return;
          }

          const meta = document.createElement("div");
          meta.style.marginBottom = "8px";
          meta.innerHTML = `<small>Rover: ${res.rover || "Curiosity"} ‚Ä¢ Sol: ${res.sol ?? "‚Äî"} ‚Ä¢ Source: ${res.source || "NASA"}</small>`;
          container.appendChild(meta);

          photos.forEach((src) => {
            const img = document.createElement("img");
            img.src = src;
            img.alt = "Mars rover";
            img.style.width = "200px";
            img.style.margin = "5px";
            img.loading = "lazy";
            container.appendChild(img);
          });
        })
        .catch(() => {
          container.textContent = "Failed to load rover photos.";
        });
    })();
  </script>
</body>
</html>
